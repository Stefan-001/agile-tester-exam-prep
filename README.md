# Agile Tester Exam Prep (CTFL-AT)

A fully static, GitHub Pages–hosted prep platform for "Certified Tester Foundation Level Extension Syllabus – Agile Tester".

## Key Features

- Next.js (static export) + TailwindCSS + TypeScript
- Auth via Supabase (email magic link), with graceful fallback if unconfigured
- PDF processing workflow:
  - GitHub Actions preprocesses `/Documents/*.pdf` → `/data/*.json`
  - Commits generated JSON back to the repo
  - Copies `/data` to `public/data` for static export
- Dashboard with progress tracking (localStorage baseline)
- Quiz mode (MCQs, multi-correct supported) with explanations
- Flashcards auto-generated from syllabus
- Adaptive learning (focus on weak topics)
- Timed exam simulation (timer + grading + pass/fail)
- Leaderboard (Supabase table `leaderboard`) with localStorage fallback
- Notes per topic
- Confidence meter
- Spaced repetition (SM-2-like)
- Client-side export (PDF/CSV)
- CI: tests + build + deploy to GitHub Pages

## Repository Structure

- `/Documents` — syllabus PDF files (source of truth)
- `/data` — generated JSON from PDFs (CI writes here)
- `/public/data` — copied from `/data` during build for static export
- `/src/components` — reusable UI components
- `/src/lib` — helpers (auth, data, quiz, adaptive, spaced repetition, exports)
- `/src/app` — Next.js App Router pages
- `/tests` — Jest tests
- `.github/workflows/deploy.yml` — CI pipeline (test + parse PDFs + build + deploy)

## Prerequisites

- Node.js 20+
- Supabase project (optional but recommended for auth/leaderboard)

## Local Setup

1. Install dependencies:
   ```bash
   npm ci
   ```

2. Create `.env.local` from `.env.example` and set:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `NEXT_PUBLIC_BASE_PATH`:
     - For GitHub Pages project site: `/agile-tester-exam-prep`
     - For local dev (Next dev server): can be empty

3. Add your syllabus PDFs into `Documents/`.

4. Generate data locally (optional; CI will do this on push):
   ```bash
   npm run parse:pdfs
   npm run prepare:data
   ```

5. Run dev server:
   ```bash
   npm run dev
   ```

## Build & Export Static

```bash
# Ensures /data is copied to /public/data
npm run build:static
```

Static site is generated under `out/`.

## Deployment (GitHub Pages)

This repo includes `.github/workflows/deploy.yml` which:
- Parses PDFs → `/data/*.json` and commits changes
- Runs tests
- Builds and exports the static site
- Deploys to GitHub Pages

Repository Settings → Pages:
- Source: "GitHub Actions"
- After a successful run, your site will be at:
  `https://<your-username>.github.io/agile-tester-exam-prep/`

If you fork/rename:
- Update `NEXT_PUBLIC_BASE_PATH` accordingly (e.g., `/your-repo-name`)

## Supabase Setup (Optional but Recommended)

1. Create a project at https://app.supabase.com
2. Get `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY`
3. Enable email auth (magic link)
4. Redirect URL: 
   - `https://<your-username>.github.io/agile-tester-exam-prep/` (and local `http://localhost:3000`)
5. For leaderboard, create a table:
   ```sql
   create table leaderboard (
     id bigint generated by default as identity primary key,
     user text not null,
     score int not null,
     "when" timestamptz default now()
   );
   ```
   Add Row Level Security (RLS) as appropriate.

## Testing

```bash
npm run test
```

## Notes on PDF Parsing

- CI uses a heuristic parser (`scripts/parse-pdfs.mjs`) to extract topics, terms (from `Label: Definition` lines), and generate simple MCQs from sentences.
- You can refine the heuristics to better match the syllabus formatting.
- Client-side fallback parser using `pdfjs-dist` is provided in `src/lib/pdfClient.ts` if you need in-browser parsing.

## Accessibility & Mobile

- Mobile-first layout and dark mode friendly
- Uses semantic HTML and keyboard-friendly controls

## License

Content derived from the syllabus belongs to their respective owners. This repository provides tooling and structure only.